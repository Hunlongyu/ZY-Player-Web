import{D as e,d as t,P as n,V as a,H as l,u as s,r,a as i,l as o,b as c,o as u,_ as d,n as m,c as p,e as h,f as y,w as f,g,h as w,t as z,i as v,v as b,j as k,k as C,m as _,p as H,q as P,s as V,x,y as E,z as Y,A as D,B,C as S,E as T,F as U,G as A,I as M,J as O,K as Z}from"./vendor.f12ef364.js";const L=new class extends e{constructor(){super("ZYPlayerWeb"),this.version(2).stores({setting:"id, theme, volume",star:"++id, name, url, date, host",history:"++id, name, url, date, host, time"}),this.version(3).stores({setting:"id, language, history",star:"++id, name, url, date, host, time",history:"++id, name, url, date, host, time"}),this.history=this.table("history"),this.star=this.table("star"),this.setting=this.table("setting")}},W=[{id:0,language:"cn",history:!0}];L.on("populate",(()=>{L.setting.bulkAdd(W)})),L.open();const F=new class{async add(e){return await L.history.add(e)}async find(e){return await L.history.where({url:e}).first()}async update(e,t){return await L.history.update(e,t)}async all(){return await L.history.toArray()}async remove(e){return await L.history.delete(e)}async clear(){return await L.history.clear()}},R=new class{async add(e){return await L.star.add(e)}async find(e){return await L.star.where({url:e}).first()}async update(e,t){return await L.star.update(e,t)}async all(){return await L.star.toArray()}async remove(e){return await L.star.delete(e)}async clear(){return await L.star.clear()}},q=new class{async find(){return await L.setting.get({id:0})}async update(e){return await L.setting.update(0,e)}};var I=t({name:"App",components:{Player:n,Video:a,Hls:l},setup(){const{t:e,locale:t}=s(),n=r({input:"",hls:"",mp4:"",name:"",host:""}),a=r({history:!1,star:!1,setting:!1,player:!1,hls:!1,mp4:!1}),l=r({language:"cn",history:!1}),p=r({star:[],history:[]}),h=i("100%"),y=i(0),f=i(null);function g(e){const t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!==n?decodeURI(n[2]):null}function w(){if(""===n.input)return d.warning(e("url.empty")),!1;-1!==n.input.indexOf(".m3u8")?(a.mp4=!1,n.hls=n.input,a.player=!0,a.hls=!0,z(n.input)):-1!==n.input.indexOf(".mp4")?(a.hls=!1,n.mp4=n.input,a.player=!0,a.mp4=!0,z(n.input)):d.warning(e("url.incorrect"))}async function z(e){const t=await F.find(e);y.value=t?t.time:0,await m(),f&&f.value&&f.value.play(),H()}function v(){const e=document.body.offsetWidth;h.value=e<=768?"100%":"50%"}async function b(){const e=await q.find();e&&(l.language=e.language,l.history=e.history,t.value=e.language)}async function k(){const e=await R.all();e&&(p.star=e)}async function C(){const e=await F.all();e&&(p.history=e)}const _=o.exports.throttle((async e=>{const t=await F.find(n.input),a={name:"",url:n.input,host:n.host,date:c().format("YYYY-MM-DD HH:mm:ss"),time:e};t&&t.id?(a.name=t.name,F.update(t.id,a)):(a.name=n.name||"- -",F.add(a))}),5e3);async function H(){if(await R.find(n.input)){const e=document.querySelector(".icon-star");null==e||e.classList.add("active")}else{const e=document.querySelector(".icon-star");null==e||e.classList.remove("active")}}return u((()=>{n.input=g("url")||"",n.name=g("name")||"",n.host=g("host")||"",""!==n.input&&w(),b(),v(),window.onresize=()=>{v()}})),{db:p,t:e,locale:t,url:n,show:a,size:h,currentTime:y,player:f,linkBtnEvent:function(){a.player=!1,a.hls=!1,a.mp4=!1},historyBtnEvent:function(){a.history=!0,C()},starBtnEvent:function(){a.star=!0,k()},settingBtnEvent:function(){a.setting=!0,b()},enterEvent:w,onTimeUpdate:function(e){y.value=e,l.history&&_(e)},historyHandlePlay:async function(e){e.url&&(n.input=e.url,w()),a.history=!1},hostHandleOpen:function(e){e.host&&window.open(e.host)},historyHandleDelete:async function(t){t.id&&(await F.remove(t.id),await C(),d.success(e("msg.delete-success")))},starHandlePlay:function(e){e.url&&(n.input=e.url,w()),a.star=!1},starHandleDelete:async function(t){t.id&&(await R.remove(t.id),await k(),d.success(e("msg.delete-success")))},addStar:async function(){const t=await R.find(n.input);if(t&&t.id)R.remove(t.id);else{const t={name:n.name||"- -",url:n.input,host:n.host,date:c().format("YYYY-MM-DD HH:mm:ss"),time:y.value};R.add(t),d.success(e("msg.star-add"))}H()},handleCommand:function(e){t.value=e,q.update({language:e,history:!0})},clearHistory:async function(){await F.clear(),d.success(e("msg.clear-success"))},clearStar:async function(){await R.clear(),d.success(e("msg.clear-success"))}}}});const K={class:"el-dropdown-link"},j=g("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),G=g("path",{d:"M755.2 64c-107.616 0-200.256 87.552-243.168 179.008C469.088 151.552 376.448 64 268.8 64 120.416 64 0 184.448 0 332.832c0 301.856 304.512 380.992 512.032 679.424C708.192 715.68 1024 625.056 1024 332.832 1024 184.448 903.584 64 755.2 64z","p-id":"3120",fill:"#ffffff"},null,-1),J={class:"setting-body"},N={class:"logo"},$=g("img",{src:"./assets/logo.76d1564e.png",alt:""},null,-1),Q=g("h2",null,"ZY Player Web",-1),X=g("a",{href:"https://github.com/Hunlongyu/ZY-Player-Web",target:"_blank"},"Github",-1),ee={href:"https://github.com/Hunlongyu/ZY-Player-Web/issues",target:"_blank"},te={href:"https://github.com/Hunlongyu/ZY-Player",target:"_blank"},ne={href:"https://github.com/Hunlongyu/ZY-Player-APP",target:"_blank"},ae={class:"setting-item"};I.render=function(e,t,n,a,l,s){const r=p("el-dropdown-item"),i=p("el-dropdown-menu"),o=p("el-dropdown"),c=p("el-button"),u=p("el-header"),d=p("el-input"),m=p("el-col"),_=p("el-row"),H=p("Video"),P=p("Hls"),V=p("Player"),x=p("el-main"),E=p("el-table-column"),Y=p("el-table"),D=p("el-drawer"),B=p("el-container");return y(),h(B,{class:"container"},{default:f((()=>[g(u,{class:"header"},{default:f((()=>[g(o,{class:"language",onCommand:e.handleCommand},{dropdown:f((()=>[g(i,null,{default:f((()=>[g(r,{command:"cn"},{default:f((()=>[w(z(e.t("lang.cn")),1)])),_:1}),g(r,{command:"en"},{default:f((()=>[w(z(e.t("lang.en")),1)])),_:1})])),_:1})])),default:f((()=>[g("span",K,[w(z(e.t("lang.select")),1),j])])),_:1},8,["onCommand"]),v(g(c,{onClick:e.linkBtnEvent,icon:"el-icon-link",circle:"",title:e.t("title.link")},null,8,["onClick","title"]),[[b,e.show.player]]),g(c,{onClick:e.historyBtnEvent,icon:"el-icon-time",circle:"",title:e.t("title.history")},null,8,["onClick","title"]),g(c,{onClick:e.starBtnEvent,icon:"el-icon-star-off",circle:"",title:e.t("title.star")},null,8,["onClick","title"]),g(c,{onClick:e.settingBtnEvent,icon:"el-icon-setting",circle:"",title:e.t("title.setting")},null,8,["onClick","title"])])),_:1}),g(x,null,{default:f((()=>[v(g(_,{class:"input-box",type:"flex"},{default:f((()=>[g(m,{lg:10,md:12,sm:16,xs:24},{default:f((()=>[g(d,{placeholder:e.t("url.input"),modelValue:e.url.input,"onUpdate:modelValue":t[1]||(t[1]=t=>e.url.input=t),modelModifiers:{trim:!0},onKeydown:k(e.enterEvent,["enter"]),clearable:""},{append:f((()=>[g(c,{onClick:e.enterEvent,icon:"el-icon-video-play",title:e.t("title.play")},null,8,["onClick","title"])])),_:1},8,["placeholder","modelValue","onKeydown"])])),_:1})])),_:1},512),[[b,!e.show.player]]),v(g(_,{class:"player-box",type:"flex"},{default:f((()=>[g(m,{lg:10,md:12,sm:16,xs:24,class:"box"},{default:f((()=>[g(V,{playsinline:"",controls:"",currentTime:e.currentTime,onVmCurrentTimeChange:e.onTimeUpdate,ref:"player"},{default:f((()=>[e.show.mp4?(y(),h(H,{key:0},{default:f((()=>[g("source",{"data-src":e.url.mp4,type:"video/mp4"},null,8,["data-src"])])),_:1})):C("",!0),e.show.hls?(y(),h(P,{key:1,disableRemotePlayback:!0,version:"latest"},{default:f((()=>[g("source",{"data-src":e.url.hls,type:"application/x-mpegURL"},null,8,["data-src"])])),_:1})):C("",!0)])),_:1},8,["currentTime","onVmCurrentTimeChange"]),g("span",{onClick:t[2]||(t[2]=(...t)=>e.addStar&&e.addStar(...t))},[(y(),h("svg",{t:"1606442580426",title:e.t("title.star"),class:"icon-star",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3119",width:"21",height:"21"},[G],8,["title"]))])])),_:1})])),_:1},512),[[b,e.show.player]])])),_:1}),g(D,{title:e.t("title.history"),size:e.size,modelValue:e.show.history,"onUpdate:modelValue":t[3]||(t[3]=t=>e.show.history=t),direction:"rtl"},{default:f((()=>[g(Y,{data:e.db.history,stripe:"",height:"100%",fit:""},{default:f((()=>[g(E,{prop:"name",label:e.t("title.name"),"show-overflow-tooltip":""},null,8,["label"]),g(E,{prop:"date",label:e.t("title.date"),"show-overflow-tooltip":""},null,8,["label"]),g(E,{label:e.t("title.operate")},{default:f((t=>[g(c,{size:"mini",onClick:n=>e.historyHandlePlay(t.row),icon:"el-icon-video-play",circle:""},null,8,["onClick"]),g(c,{size:"mini",onClick:n=>e.hostHandleOpen(t.row),icon:"el-icon-position",circle:""},null,8,["onClick"]),g(c,{size:"mini",onClick:n=>e.historyHandleDelete(t.row),icon:"el-icon-delete",circle:""},null,8,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"])])),_:1},8,["title","size","modelValue"]),g(D,{title:e.t("title.star"),size:e.size,modelValue:e.show.star,"onUpdate:modelValue":t[4]||(t[4]=t=>e.show.star=t),direction:"rtl"},{default:f((()=>[g(Y,{data:e.db.star,stripe:"",height:"100%",fit:""},{default:f((()=>[g(E,{prop:"name",label:e.t("title.name"),"show-overflow-tooltip":""},null,8,["label"]),g(E,{prop:"date",label:e.t("title.date"),"show-overflow-tooltip":""},null,8,["label"]),g(E,{label:e.t("title.operate")},{default:f((t=>[g(c,{size:"mini",onClick:n=>e.starHandlePlay(t.row),icon:"el-icon-video-play",circle:""},null,8,["onClick"]),g(c,{size:"mini",onClick:n=>e.hostHandleOpen(t.row),icon:"el-icon-position",circle:""},null,8,["onClick"]),g(c,{size:"mini",onClick:n=>e.starHandleDelete(t.row),icon:"el-icon-delete",circle:""},null,8,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"])])),_:1},8,["title","size","modelValue"]),g(D,{title:e.t("title.setting"),size:e.size,modelValue:e.show.setting,"onUpdate:modelValue":t[5]||(t[5]=t=>e.show.setting=t),direction:"rtl"},{default:f((()=>[g("div",J,[g("div",N,[$,Q,g("p",null,[X,g("a",ee,z(e.t("setting.issues")),1),g("a",te,z(e.t("setting.pc")),1),g("a",ne,z(e.t("setting.mobile")),1)])]),g("div",ae,[g(c,{size:"small",onClick:e.clearHistory},{default:f((()=>[w(z(e.t("setting.clear-history")),1)])),_:1},8,["onClick"]),g(c,{size:"small",onClick:e.clearStar},{default:f((()=>[w(z(e.t("setting.clear-star")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","size","modelValue"])])),_:1})};const le=_({locale:"cn",messages:{cn:{title:{link:e=>{const{normalize:t}=e;return t(["视频链接输入"])},history:e=>{const{normalize:t}=e;return t(["播放记录"])},star:e=>{const{normalize:t}=e;return t(["收藏夹"])},setting:e=>{const{normalize:t}=e;return t(["设置"])},play:e=>{const{normalize:t}=e;return t(["播放"])},name:e=>{const{normalize:t}=e;return t(["名称"])},host:e=>{const{normalize:t}=e;return t(["来源"])},date:e=>{const{normalize:t}=e;return t(["日期"])},operate:e=>{const{normalize:t}=e;return t(["操作"])}},url:{input:e=>{const{normalize:t}=e;return t(["请输入视频链接..."])},empty:e=>{const{normalize:t}=e;return t(["链接不能为空，请检查后重试..."])},correct:e=>{const{normalize:t}=e;return t(["链接正确，正在加载中..."])},incorrect:e=>{const{normalize:t}=e;return t(["链接不正确，请检查后重试..."])}},btn:{open:e=>{const{normalize:t}=e;return t(["打开"])},delete:e=>{const{normalize:t}=e;return t(["删除"])}},msg:{"delete-success":e=>{const{normalize:t}=e;return t(["删除成功"])},"star-add":e=>{const{normalize:t}=e;return t(["添加到收藏夹成功"])},"star-remove":e=>{const{normalize:t}=e;return t(["从收藏夹移除成功"])},"clear-success":e=>{const{normalize:t}=e;return t(["清空成功"])}},lang:{select:e=>{const{normalize:t}=e;return t(["语言"])},en:e=>{const{normalize:t}=e;return t(["English"])},cn:e=>{const{normalize:t}=e;return t(["简体中文"])}},setting:{issues:e=>{const{normalize:t}=e;return t(["反馈"])},pc:e=>{const{normalize:t}=e;return t(["电脑端"])},mobile:e=>{const{normalize:t}=e;return t(["手机端"])},"clear-history":e=>{const{normalize:t}=e;return t(["清空播放记录"])},"clear-star":e=>{const{normalize:t}=e;return t(["清空收藏夹"])}}},en:{title:{link:e=>{const{normalize:t}=e;return t(["Video link"])},history:e=>{const{normalize:t}=e;return t(["Playback record"])},star:e=>{const{normalize:t}=e;return t(["Favorites"])},setting:e=>{const{normalize:t}=e;return t(["Settings"])},play:e=>{const{normalize:t}=e;return t(["Play!"])},name:e=>{const{normalize:t}=e;return t(["Name"])},host:e=>{const{normalize:t}=e;return t(["From"])},date:e=>{const{normalize:t}=e;return t(["Date"])},operate:e=>{const{normalize:t}=e;return t(["Operate"])}},url:{input:e=>{const{normalize:t}=e;return t(["Please enter the video link..."])},empty:e=>{const{normalize:t}=e;return t(["Link cannot be empty, please check and try again..."])},correct:e=>{const{normalize:t}=e;return t(["The link is correct, loading..."])},incorrect:e=>{const{normalize:t}=e;return t(["The link is incorrect. Please check and try again..."])}},btn:{open:e=>{const{normalize:t}=e;return t(["Open"])},delete:e=>{const{normalize:t}=e;return t(["Delete"])}},msg:{"delete-success":e=>{const{normalize:t}=e;return t(["Successfully deleted"])},"star-add":e=>{const{normalize:t}=e;return t(["Add to Favorites succeeded"])},"star-remove":e=>{const{normalize:t}=e;return t(["Successfully removed from favorites"])},"clear-success":e=>{const{normalize:t}=e;return t(["Clear successfully"])}},lang:{select:e=>{const{normalize:t}=e;return t(["Language"])},en:e=>{const{normalize:t}=e;return t(["English"])},cn:e=>{const{normalize:t}=e;return t(["简体中文"])}},setting:{issues:e=>{const{normalize:t}=e;return t(["Issues"])},pc:e=>{const{normalize:t}=e;return t(["PC"])},mobile:e=>{const{normalize:t}=e;return t(["Mobile"])},"clear-history":e=>{const{normalize:t}=e;return t(["Clear playback record"])},"clear-star":e=>{const{normalize:t}=e;return t(["Clear favorites"])}}}}}),se=H(I);se.use(le).use(P).use(V).use(x).use(E).use(Y).use(D).use(B).use(S).use(T).use(U).use(A).use(M).use(O).use(Z),se.mount("#app");
