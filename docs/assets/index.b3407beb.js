import{D as e,d as t,P as n,V as r,H as a,u as l,r as s,a as o,l as i,b as c,o as u,_ as m,n as d,c as p,e as h,f as y,w as z,g,h as f,t as w,i as v,v as b,j as k,k as C,m as _,p as H,q as P,s as V,x,y as E,z as Y,A as D,B,C as S,E as T,F as U,G as A,I as L,J as M,K as O}from"./vendor.6ae6d51c.js";const Z=new class extends e{constructor(){super("ZYPlayerWeb"),this.version(2).stores({setting:"id, theme, volume",star:"++id, name, url, date, host",history:"++id, name, url, date, host, time"}),this.version(3).stores({setting:"id, language, history",star:"++id, name, url, date, host, time",history:"++id, name, url, date, host, time"}),this.history=this.table("history"),this.star=this.table("star"),this.setting=this.table("setting")}},W=[{id:0,language:"cn",history:!0}];Z.on("populate",(()=>{Z.setting.bulkAdd(W)})),Z.open();const F=new class{async add(e){return await Z.history.add(e)}async find(e){return await Z.history.where({url:e}).first()}async update(e,t){return await Z.history.update(e,t)}async all(){return await Z.history.toArray()}async remove(e){return await Z.history.delete(e)}async clear(){return await Z.history.clear()}},R=new class{async add(e){return await Z.star.add(e)}async find(e){return await Z.star.where({url:e}).first()}async update(e,t){return await Z.star.update(e,t)}async all(){return await Z.star.toArray()}async remove(e){return await Z.star.delete(e)}async clear(){return await Z.star.clear()}},q=new class{async find(){return await Z.setting.get({id:0})}async update(e){return await Z.setting.update(0,e)}};var I=t({name:"App",components:{Player:n,Video:r,Hls:a},setup(){const{t:e,locale:t}=l(),n=s({input:"",hls:"",mp4:"",name:"",host:""}),r=s({history:!1,star:!1,setting:!1,player:!1,hls:!1,mp4:!1}),a=s({language:"cn",history:!1}),p=s({star:[],history:[]}),h=o("100%"),y=o(0),z=o(null);function g(e){const t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!==n?decodeURI(n[2]):null}function f(){if(""===n.input)return m.warning(e("url.empty")),!1;-1!==n.input.indexOf(".m3u8")?(r.mp4=!1,n.hls=n.input,r.player=!0,r.hls=!0,w(n.input)):-1!==n.input.indexOf(".mp4")?(r.hls=!1,n.mp4=n.input,r.player=!0,r.mp4=!0,w(n.input)):m.warning(e("url.incorrect"))}async function w(e){const t=await F.find(e);y.value=t?t.time:0,await d(),z&&z.value&&z.value.play(),H()}function v(){const e=document.body.offsetWidth;h.value=e<=768?"100%":"50%"}async function b(){const e=await q.find();e&&(a.language=e.language,a.history=e.history,t.value=e.language)}async function k(){const e=await R.all();e&&(p.star=e)}async function C(){const e=await F.all();e&&(p.history=e)}const _=i.exports.throttle((async e=>{const t=await F.find(n.input),r={name:"",url:n.input,host:n.host,date:c().format("YYYY-MM-DD HH:mm:ss"),time:e};t&&t.id?(r.name=t.name,F.update(t.id,r)):(r.name=n.name||"- -",F.add(r))}),5e3);async function H(){if(await R.find(n.input)){const e=document.querySelector(".icon-star");null==e||e.classList.add("active")}else{const e=document.querySelector(".icon-star");null==e||e.classList.remove("active")}}return u((()=>{n.input=g("url")||"",n.name=g("name")||"",n.host=g("host")||"",""!==n.input&&f(),b(),v(),window.onresize=()=>{v()}})),{db:p,t:e,locale:t,url:n,show:r,size:h,currentTime:y,player:z,linkBtnEvent:function(){r.player=!1,r.hls=!1,r.mp4=!1},historyBtnEvent:function(){r.history=!0,C()},starBtnEvent:function(){r.star=!0,k()},settingBtnEvent:function(){r.setting=!0,b()},enterEvent:f,onTimeUpdate:function(e){y.value=e,a.history&&_(e)},historyHandlePlay:async function(e){e.url&&(n.input=e.url,f()),r.history=!1},hostHandleOpen:function(e){e.host&&window.open(e.host)},historyHandleDelete:async function(t){t.id&&(await F.remove(t.id),await C(),m.success(e("msg.delete-success")))},starHandlePlay:function(e){e.url&&(n.input=e.url,f()),r.star=!1},starHandleDelete:async function(t){t.id&&(await R.remove(t.id),await k(),m.success(e("msg.delete-success")))},addStar:async function(){const t=await R.find(n.input);if(t&&t.id)R.remove(t.id);else{const t={name:n.name||"- -",url:n.input,host:n.host,date:c().format("YYYY-MM-DD HH:mm:ss"),time:y.value};R.add(t),m.success(e("msg.star-add"))}H()},handleCommand:function(e){t.value=e,q.update({language:e,history:!0})},clearHistory:async function(){await F.clear(),m.success(e("msg.clear-success"))},clearStar:async function(){await R.clear(),m.success(e("msg.clear-success"))}}}});const K={class:"el-dropdown-link"},j=g("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),G=g("path",{d:"M755.2 64c-107.616 0-200.256 87.552-243.168 179.008C469.088 151.552 376.448 64 268.8 64 120.416 64 0 184.448 0 332.832c0 301.856 304.512 380.992 512.032 679.424C708.192 715.68 1024 625.056 1024 332.832 1024 184.448 903.584 64 755.2 64z","p-id":"3120",fill:"#ffffff"},null,-1),J={class:"setting-body"},N={class:"logo"},$=g("img",{src:"./assets/logo.76d1564e.png",alt:""},null,-1),Q=g("h2",null,"ZY Player Web",-1),X=g("a",{href:"https://github.com/Hunlongyu/ZY-Player-Web",target:"_blank"},"Github",-1),ee={href:"https://github.com/Hunlongyu/ZY-Player-Web/issues",target:"_blank"},te={href:"https://github.com/Hunlongyu/ZY-Player",target:"_blank"},ne={href:"https://github.com/Hunlongyu/ZY-Player-APP",target:"_blank"},re={class:"setting-item"};I.render=function(e,t,n,r,a,l){const s=h("el-dropdown-item"),o=h("el-dropdown-menu"),i=h("el-dropdown"),c=h("el-button"),u=h("el-header"),m=h("el-input"),d=h("el-col"),_=h("el-row"),H=h("Video"),P=h("Hls"),V=h("Player"),x=h("el-main"),E=h("el-table-column"),Y=h("el-table"),D=h("el-drawer"),B=h("el-container");return y(),p(B,{class:"container"},{default:z((()=>[g(u,{class:"header"},{default:z((()=>[g(i,{class:"language",onCommand:e.handleCommand},{dropdown:z((()=>[g(o,null,{default:z((()=>[g(s,{command:"cn"},{default:z((()=>[f(w(e.t("lang.cn")),1)])),_:1}),g(s,{command:"en"},{default:z((()=>[f(w(e.t("lang.en")),1)])),_:1}),g(s,{command:"zh-tw"},{default:z((()=>[f(w(e.t("lang.zh-tw")),1)])),_:1})])),_:1})])),default:z((()=>[g("span",K,[f(w(e.t("lang.select")),1),j])])),_:1},8,["onCommand"]),v(g(c,{onClick:e.linkBtnEvent,icon:"el-icon-link",circle:"",title:e.t("title.link")},null,8,["onClick","title"]),[[b,e.show.player]]),g(c,{onClick:e.historyBtnEvent,icon:"el-icon-time",circle:"",title:e.t("title.history")},null,8,["onClick","title"]),g(c,{onClick:e.starBtnEvent,icon:"el-icon-star-off",circle:"",title:e.t("title.star")},null,8,["onClick","title"]),g(c,{onClick:e.settingBtnEvent,icon:"el-icon-setting",circle:"",title:e.t("title.setting")},null,8,["onClick","title"])])),_:1}),g(x,null,{default:z((()=>[v(g(_,{class:"input-box",type:"flex"},{default:z((()=>[g(d,{lg:10,md:12,sm:16,xs:24},{default:z((()=>[g(m,{placeholder:e.t("url.input"),modelValue:e.url.input,"onUpdate:modelValue":t[1]||(t[1]=t=>e.url.input=t),modelModifiers:{trim:!0},onKeydown:k(e.enterEvent,["enter"]),clearable:""},{append:z((()=>[g(c,{onClick:e.enterEvent,icon:"el-icon-video-play",title:e.t("title.play")},null,8,["onClick","title"])])),_:1},8,["placeholder","modelValue","onKeydown"])])),_:1})])),_:1},512),[[b,!e.show.player]]),v(g(_,{class:"player-box",type:"flex"},{default:z((()=>[g(d,{lg:10,md:12,sm:16,xs:24,class:"box"},{default:z((()=>[g(V,{playsinline:"",controls:"",currentTime:e.currentTime,onVmCurrentTimeChange:e.onTimeUpdate,ref:"player"},{default:z((()=>[e.show.mp4?(y(),p(H,{key:0},{default:z((()=>[g("source",{"data-src":e.url.mp4,type:"video/mp4"},null,8,["data-src"])])),_:1})):C("",!0),e.show.hls?(y(),p(P,{key:1,disableRemotePlayback:!0,version:"latest"},{default:z((()=>[g("source",{"data-src":e.url.hls,type:"application/x-mpegURL"},null,8,["data-src"])])),_:1})):C("",!0)])),_:1},8,["currentTime","onVmCurrentTimeChange"]),g("span",{onClick:t[2]||(t[2]=(...t)=>e.addStar&&e.addStar(...t))},[(y(),p("svg",{t:"1606442580426",title:e.t("title.star"),class:"icon-star",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3119",width:"21",height:"21"},[G],8,["title"]))])])),_:1})])),_:1},512),[[b,e.show.player]])])),_:1}),g(D,{title:e.t("title.history"),size:e.size,modelValue:e.show.history,"onUpdate:modelValue":t[3]||(t[3]=t=>e.show.history=t),direction:"rtl"},{default:z((()=>[g(Y,{data:e.db.history,stripe:"",height:"100%",fit:""},{default:z((()=>[g(E,{prop:"name",label:e.t("title.name"),"show-overflow-tooltip":""},null,8,["label"]),g(E,{prop:"date",label:e.t("title.date"),"show-overflow-tooltip":""},null,8,["label"]),g(E,{label:e.t("title.operate")},{default:z((t=>[g(c,{size:"mini",onClick:n=>e.historyHandlePlay(t.row),icon:"el-icon-video-play",circle:""},null,8,["onClick"]),g(c,{size:"mini",onClick:n=>e.hostHandleOpen(t.row),icon:"el-icon-position",circle:""},null,8,["onClick"]),g(c,{size:"mini",onClick:n=>e.historyHandleDelete(t.row),icon:"el-icon-delete",circle:""},null,8,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"])])),_:1},8,["title","size","modelValue"]),g(D,{title:e.t("title.star"),size:e.size,modelValue:e.show.star,"onUpdate:modelValue":t[4]||(t[4]=t=>e.show.star=t),direction:"rtl"},{default:z((()=>[g(Y,{data:e.db.star,stripe:"",height:"100%",fit:""},{default:z((()=>[g(E,{prop:"name",label:e.t("title.name"),"show-overflow-tooltip":""},null,8,["label"]),g(E,{prop:"date",label:e.t("title.date"),"show-overflow-tooltip":""},null,8,["label"]),g(E,{label:e.t("title.operate")},{default:z((t=>[g(c,{size:"mini",onClick:n=>e.starHandlePlay(t.row),icon:"el-icon-video-play",circle:""},null,8,["onClick"]),g(c,{size:"mini",onClick:n=>e.hostHandleOpen(t.row),icon:"el-icon-position",circle:""},null,8,["onClick"]),g(c,{size:"mini",onClick:n=>e.starHandleDelete(t.row),icon:"el-icon-delete",circle:""},null,8,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"])])),_:1},8,["title","size","modelValue"]),g(D,{title:e.t("title.setting"),size:e.size,modelValue:e.show.setting,"onUpdate:modelValue":t[5]||(t[5]=t=>e.show.setting=t),direction:"rtl"},{default:z((()=>[g("div",J,[g("div",N,[$,Q,g("p",null,[X,g("a",ee,w(e.t("setting.issues")),1),g("a",te,w(e.t("setting.pc")),1),g("a",ne,w(e.t("setting.mobile")),1)])]),g("div",re,[g(c,{size:"small",onClick:e.clearHistory},{default:z((()=>[f(w(e.t("setting.clear-history")),1)])),_:1},8,["onClick"]),g(c,{size:"small",onClick:e.clearStar},{default:z((()=>[f(w(e.t("setting.clear-star")),1)])),_:1},8,["onClick"])])])])),_:1},8,["title","size","modelValue"])])),_:1})};const ae=_({locale:"cn",messages:{cn:{title:{link:e=>{const{normalize:t}=e;return t(["视频链接输入"])},history:e=>{const{normalize:t}=e;return t(["播放记录"])},star:e=>{const{normalize:t}=e;return t(["收藏夹"])},setting:e=>{const{normalize:t}=e;return t(["设置"])},play:e=>{const{normalize:t}=e;return t(["播放"])},name:e=>{const{normalize:t}=e;return t(["名称"])},host:e=>{const{normalize:t}=e;return t(["来源"])},date:e=>{const{normalize:t}=e;return t(["日期"])},operate:e=>{const{normalize:t}=e;return t(["操作"])}},url:{input:e=>{const{normalize:t}=e;return t(["请输入视频链接..."])},empty:e=>{const{normalize:t}=e;return t(["链接不能为空，请检查后重试..."])},correct:e=>{const{normalize:t}=e;return t(["链接正确，正在加载中..."])},incorrect:e=>{const{normalize:t}=e;return t(["链接不正确，请检查后重试..."])}},btn:{open:e=>{const{normalize:t}=e;return t(["打开"])},delete:e=>{const{normalize:t}=e;return t(["删除"])}},msg:{"delete-success":e=>{const{normalize:t}=e;return t(["删除成功"])},"star-add":e=>{const{normalize:t}=e;return t(["添加到收藏夹成功"])},"star-remove":e=>{const{normalize:t}=e;return t(["从收藏夹移除成功"])},"clear-success":e=>{const{normalize:t}=e;return t(["清空成功"])}},lang:{select:e=>{const{normalize:t}=e;return t(["Language 语言"])},en:e=>{const{normalize:t}=e;return t(["English"])},cn:e=>{const{normalize:t}=e;return t(["简体中文"])},"zh-tw":e=>{const{normalize:t}=e;return t(["繁體中文"])}},setting:{issues:e=>{const{normalize:t}=e;return t(["反馈"])},pc:e=>{const{normalize:t}=e;return t(["电脑端"])},mobile:e=>{const{normalize:t}=e;return t(["手机端"])},"clear-history":e=>{const{normalize:t}=e;return t(["清空播放记录"])},"clear-star":e=>{const{normalize:t}=e;return t(["清空收藏夹"])}}},en:{title:{link:e=>{const{normalize:t}=e;return t(["Video link"])},history:e=>{const{normalize:t}=e;return t(["Playback record"])},star:e=>{const{normalize:t}=e;return t(["Favorites"])},setting:e=>{const{normalize:t}=e;return t(["Settings"])},play:e=>{const{normalize:t}=e;return t(["Play!"])},name:e=>{const{normalize:t}=e;return t(["Name"])},host:e=>{const{normalize:t}=e;return t(["From"])},date:e=>{const{normalize:t}=e;return t(["Date"])},operate:e=>{const{normalize:t}=e;return t(["Operate"])}},url:{input:e=>{const{normalize:t}=e;return t(["Please enter the video link..."])},empty:e=>{const{normalize:t}=e;return t(["Link cannot be empty, please check and try again..."])},correct:e=>{const{normalize:t}=e;return t(["The link is correct, loading..."])},incorrect:e=>{const{normalize:t}=e;return t(["The link is incorrect. Please check and try again..."])}},btn:{open:e=>{const{normalize:t}=e;return t(["Open"])},delete:e=>{const{normalize:t}=e;return t(["Delete"])}},msg:{"delete-success":e=>{const{normalize:t}=e;return t(["Successfully deleted"])},"star-add":e=>{const{normalize:t}=e;return t(["Add to Favorites succeeded"])},"star-remove":e=>{const{normalize:t}=e;return t(["Successfully removed from favorites"])},"clear-success":e=>{const{normalize:t}=e;return t(["Clear successfully"])}},lang:{select:e=>{const{normalize:t}=e;return t(["Language"])},en:e=>{const{normalize:t}=e;return t(["English"])},cn:e=>{const{normalize:t}=e;return t(["简体中文"])},"zh-tw":e=>{const{normalize:t}=e;return t(["繁體中文"])}},setting:{issues:e=>{const{normalize:t}=e;return t(["Issues"])},pc:e=>{const{normalize:t}=e;return t(["PC"])},mobile:e=>{const{normalize:t}=e;return t(["Mobile"])},"clear-history":e=>{const{normalize:t}=e;return t(["Clear playback record"])},"clear-star":e=>{const{normalize:t}=e;return t(["Clear favorites"])}}},"zh-tw":{title:{link:e=>{const{normalize:t}=e;return t(["視頻連結輸入"])},history:e=>{const{normalize:t}=e;return t(["播放記錄"])},star:e=>{const{normalize:t}=e;return t(["收藏夾"])},setting:e=>{const{normalize:t}=e;return t(["設置"])},play:e=>{const{normalize:t}=e;return t(["播放"])},name:e=>{const{normalize:t}=e;return t(["名稱"])},host:e=>{const{normalize:t}=e;return t(["來源"])},date:e=>{const{normalize:t}=e;return t(["日期"])},operate:e=>{const{normalize:t}=e;return t(["操作"])}},url:{input:e=>{const{normalize:t}=e;return t(["請輸入視頻連結..."])},empty:e=>{const{normalize:t}=e;return t(["連結不能為空，請檢查後重試..."])},correct:e=>{const{normalize:t}=e;return t(["連結正確，正在加載中..."])},incorrect:e=>{const{normalize:t}=e;return t(["連結不正確，請檢查後重試..."])}},btn:{open:e=>{const{normalize:t}=e;return t(["打開"])},delete:e=>{const{normalize:t}=e;return t(["刪除"])}},msg:{"delete-success":e=>{const{normalize:t}=e;return t(["刪除成功"])},"star-add":e=>{const{normalize:t}=e;return t(["新增到收藏夾成功"])},"star-remove":e=>{const{normalize:t}=e;return t(["從收藏夾移除成功"])},"clear-success":e=>{const{normalize:t}=e;return t(["清空成功"])}},lang:{select:e=>{const{normalize:t}=e;return t(["Language 語言"])},en:e=>{const{normalize:t}=e;return t(["English"])},cn:e=>{const{normalize:t}=e;return t(["簡體中文"])},tw:e=>{const{normalize:t}=e;return t(["繁體中文"])}},setting:{issues:e=>{const{normalize:t}=e;return t(["回饋"])},pc:e=>{const{normalize:t}=e;return t(["電腦端"])},mobile:e=>{const{normalize:t}=e;return t(["手機端"])},"clear-history":e=>{const{normalize:t}=e;return t(["清空播放記錄"])},"clear-star":e=>{const{normalize:t}=e;return t(["清空收藏夾"])}}}}}),le=H(I);le.use(ae).use(P).use(V).use(x).use(E).use(Y).use(D).use(B).use(S).use(T).use(U).use(A).use(L).use(M).use(O),le.mount("#app");
